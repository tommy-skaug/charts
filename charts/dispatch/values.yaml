image:
  repository: ghcr.io/tommy-skaug/dispatch
  tag: v20230919
  pullPolicy: Always

initContainers:
  dbInit:
    image:
      repository: ghcr.io/onedr0p/postgres-init
      tag: "16"
    envFrom:
      - secretRef:
          name: dispatch-secret

core:
  enabled: true
  secretRef:
    name: dispatch-secret

web:
  enabled: true
  container:
    port: 8000
    command: ["dispatch", "server", "start", "dispatch.main:app", "--host=0.0.0.0"]
    envFrom:
      secretRef:
        name: dispatch-secret
  service:
    type: ClusterIP
    port: 80

scheduler:
  enabled: true
  command: ["dispatch", "scheduler", "start"]
  container:
    command: ["dispatch", "scheduler"]
    envFrom:
      secretRef:
        name: dispatch-secret

postgres:
  hostname: "postgres-rw.databases.svc.cluster.local"
  database_name: "postgres"
  port: "5432"
  secretRef:
    name: dispatch-secret